# üì° deckhouse-status

CLI-—É—Ç–∏–ª–∏—Ç–∞ –¥–ª—è –Ω–æ–¥ dev/test –∫–ª–∞—Å—Ç–µ—Ä–∞. –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å: **"–ê–∫—Ç—É–∞–ª–µ–Ω –ª–∏ –º–æ–π PR-–±–∏–ª–¥ Deckhouse?"**

–°–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç—Ä—ë—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ (Kubernetes API, GitHub API, Docker Registry), —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–∞–π–¥–∂–µ—Å—Ç—ã –æ–±—Ä–∞–∑–æ–≤ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç.

## –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

<img src="./pics/screenshot.png" style="border-radius: 12px;" />

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
curl -fsSL https://raw.githubusercontent.com/glitchy-sheep/deckhouse-status/main/install.sh | bash
```

–°–∫—Ä–∏–ø—Ç –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç OS/arch, —Å–∫–∞—á–∏–≤–∞–µ—Ç –±–∏–Ω–∞—Ä–Ω–∏–∫ –∏–∑ GitHub Releases –∏ –∫–ª–∞–¥—ë—Ç –≤ `/usr/local/bin`.

### –°–±–æ—Ä–∫–∞ –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤

```bash
make build-linux-amd64
scp deckhouse-status-linux-amd64 root@master-node:/usr/local/bin/deckhouse-status
```

–î—Ä—É–≥–∏–µ —Ü–µ–ª–∏: `make build` (–ª–æ–∫–∞–ª—å–Ω–∞—è), `make build-all` (–≤—Å–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã).

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```bash
deckhouse-status                       # –ø–æ–ª–Ω—ã–π –≤—ã–≤–æ–¥ (—Ç–∞–π–º–∑–æ–Ω–∞: Europe/Moscow)
deckhouse-status -s                    # –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤—ã–≤–æ–¥ (2-3 —Å—Ç—Ä–æ–∫–∏)
deckhouse-status --tz America/New_York # IANA-–∏–º—è
deckhouse-status --tz +5               # —á–∏—Å–ª–æ–≤–æ–π –æ—Ñ—Å–µ—Ç
```

### –§–ª–∞–≥–∏

| –§–ª–∞–≥            | –û–ø–∏—Å–∞–Ω–∏–µ                                                                |
| --------------- | ----------------------------------------------------------------------- |
| `-s`, `--short` | –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π –≤—ã–≤–æ–¥                                                        |
| `--tz`          | –¢–∞–π–º–∑–æ–Ω–∞: IANA-–∏–º—è –∏–ª–∏ —á–∏—Å–ª–æ (`+3`, `-5`). –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `Europe/Moscow` |
| `--no-github`   | –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å GitHub API                                                   |
| `--no-registry` | –ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–µ–µ—Å—Ç—Ä–∞                                             |
| `--no-color`    | –ë–µ–∑ —Ü–≤–µ—Ç–æ–≤                                                              |
| `--no-emoji`    | –ë–µ–∑ —ç–º–æ–¥–∑–∏                                                              |
| `--timeout`     | –¢–∞–π–º–∞—É—Ç –≤ —Å–µ–∫—É–Ω–¥–∞—Ö (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 15)                                    |

### –ö–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞          | –û–ø–∏—Å–∞–Ω–∏–µ                                                                                                                                          |
| ---------------- | ------------------------------------------------------------------------------------------------------------------------------------------------- |
| `watch-build`    | –ñ–¥–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è CI-–±–∏–ª–¥–∞ (—Å live-—Å–ø–∏–Ω–Ω–µ—Ä–æ–º). `--timeout 3600` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 60 –º–∏–Ω), `--restart` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Å—Ç–∞—Ä—Ç –¥–µ–ø–ª–æ–π–º–µ–Ω—Ç–∞ –ø—Ä–∏ —É—Å–ø–µ—Ö–µ |
| `install-motd`   | –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ SSH-–≤—Ö–æ–¥–µ (—Ç—Ä–µ–±—É–µ—Ç `sudo`)                                                                                      |
| `uninstall-motd` | –£–¥–∞–ª–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞                                                                                                                        |
| `edit-motd`      | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ–ª–∞–≥–∏ –≤ —Å–∫—Ä–∏–ø—Ç–µ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞                                                                                                         |

## –ö–∞–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å

1. **–û—Å–Ω–æ–≤–Ω–æ–π —Å–ø–æ—Å–æ–±** ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –¥–∞–π–¥–∂–µ—Å—Ç–∞ –∑–∞–ø—É—â–µ–Ω–Ω–æ–≥–æ –ø–æ–¥–∞ —Å –¥–∞–π–¥–∂–µ—Å—Ç–æ–º —Ç–µ–≥–∞ –≤ —Ä–µ–µ—Å—Ç—Ä–µ
2. **–ó–∞–ø–∞—Å–Ω–æ–π** (–µ—Å–ª–∏ —Ç–µ–≥ —É–¥–∞–ª—ë–Ω GC) ‚Äî —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–¥–∞ —Å –≤—Ä–µ–º–µ–Ω–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è CI-–±–∏–ª–¥–∞

–†–µ–¥–∞–∫—Ü–∏—è (FE/CE/EE) –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ —Å—É—Ñ—Ñ–∏–∫—Å–∞ —Ç–µ–≥–∞ –æ–±—Ä–∞–∑–∞.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Kubernetes-–¥–æ—Å—Ç—É–ø
- –°–µ—Ç–µ–≤–æ–π –¥–æ—Å—Ç—É–ø –∫ `api.github.com` –∏ dev-—Ä–µ–µ—Å—Ç—Ä—É Deckhouse
- –°–µ–∫—Ä–µ—Ç `deckhouse-registry` –≤ namespace `d8-system`
